cat $1 | awk -F, '{if($0 ~ /Tesla V100-SXM2-16GB \(0\).*Tesla V100-SXM2-16GB \(0\).*Tesla V100-SXM2-16GB \(1\).*PtoP/) {print} else if($0 ~ /Tesla V100-SXM2-16GB \(0\).*HtoD/) {print}}' > $1_ptop_2
cat $1_ptop_2 | awk 'BEGIN{cnt=0;cnt5=0} {if($0 ~/HtoD/) {cnt++} else {if(cnt==5) {cnt5++;}cnt=0;} if((cnt5==50 && ($0 ~/PtoP/)) || (cnt5==49 && ($0 ~ /HtoD/))) {print}}' > $1_ptop_3
#cat $1_ptop_2 | awk 'BEGIN{cnt=0;cnt5=0} {if($0 ~/HtoD/) {cnt++} else {if(cnt==5) {cnt5++;}cnt=0;} if(cnt5==50 && ($0 ~/PtoP/)) {print}}' > $1_ptop_3
cat $1_ptop_3|grep -v HtoD|awk -F, '{if($0 ~ /,,,[1-9].*PtoP/) {bigtime=bigtime+$2;bigsize=bigsize+$12;bigcnt=bigcnt+1;} else {smalltime=smalltime+$2;smallsize=smallsize+$12;smallcnt=smallcnt+1;} } END{print "big " bigtime " " bigsize " " bigcnt;print "small " smalltime " " smallsize  " " smallcnt}'
